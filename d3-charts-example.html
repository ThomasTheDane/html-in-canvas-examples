<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>D3.js Visually Impressive Charts</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3-scale-radial@2"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #121212;
      color: #e0e0e0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }

    h1 {
      text-align: center;
      padding: 20px;
      margin: 0;
      background: linear-gradient(90deg, #ff00cc, #333399);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3rem;
      letter-spacing: 2px;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 30px;
      padding: 40px;
      max-width: 1600px;
      margin: 0 auto;
    }

    .card {
      background: rgba(30, 30, 30, 0.6);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .chart-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: #ffffff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    svg {
      width: 100%;
      height: 300px;
      overflow: visible;
    }

    /* Tooltip */
    .tooltip {
      position: absolute;
      text-align: center;
      padding: 8px;
      font-size: 12px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 4px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
    }

    /* Chart specific styles */
    .axis line,
    .axis path {
      stroke: #555;
    }

    .axis text {
      fill: #aaa;
    }
  </style>
</head>

<body>

  <h1>D3.js Visualization Showcase</h1>

  <div class="container">
    <div class="card" id="chart1-container">
      <div class="chart-title">Smooth Area Gradient</div>
      <div id="chart1"></div>
    </div>
    <div class="card" id="chart2-container">
      <div class="chart-title">Grouped Bar Chart</div>
      <div id="chart2"></div>
    </div>
    <div class="card" id="chart3-container">
      <div class="chart-title">Donut Chart</div>
      <div id="chart3"></div>
    </div>
    <div class="card" id="chart4-container">
      <div class="chart-title">Bubble Scatter Plot</div>
      <div id="chart4"></div>
    </div>
    <div class="card" id="chart5-container">
      <div class="chart-title">Stacked Bar Chart</div>
      <div id="chart5"></div>
    </div>
    <div class="card" id="chart6-container">
      <div class="chart-title">Radial Bar Chart</div>
      <div id="chart6"></div>
    </div>
  </div>

  <div class="tooltip" id="tooltip"></div>

  <script>
    // Common Dimensions
    const margin = { top: 20, right: 20, bottom: 40, left: 50 };
    // We'll calculate width/height dynamically based on container, but for simplicity set base
    // We want responsive, so we'll use viewBox usually. But let's set a fixed decent size for drawing.
    const width = 400 - margin.left - margin.right;
    const height = 300 - margin.top - margin.bottom;
    const tooltip = d3.select("#tooltip");

    // Chart 1: Smooth Area Gradient (Sine + Noise)
    {
      const svg = d3.select("#chart1")
        .append("svg")
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      // Data
      const data = Array.from({ length: 50 }, (_, i) => ({
        x: i,
        y: Math.sin(i * 0.2) * 20 + 50 + Math.random() * 10
      }));

      // Scales
      const x = d3.scaleLinear().domain([0, 49]).range([0, width]);
      const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);

      // Gradient
      const defs = svg.append("defs");
      const gradient = defs.append("linearGradient")
        .attr("id", "area-gradient")
        .attr("x1", "0%")
        .attr("y1", "0%")
        .attr("x2", "0%")
        .attr("y2", "100%");
      gradient.append("stop").attr("offset", "0%").attr("stop-color", "#00d2ff").attr("stop-opacity", 0.8);
      gradient.append("stop").attr("offset", "100%").attr("stop-color", "#3a7bd5").attr("stop-opacity", 0.1);

      // Area Generator
      const area = d3.area()
        .curve(d3.curveCatmullRom)
        .x(d => x(d.x))
        .y0(height)
        .y1(d => y(d.y));

      // Line Generator (for top stroke)
      const line = d3.line()
        .curve(d3.curveCatmullRom)
        .x(d => x(d.x))
        .y(d => y(d.y));

      // Draw
      svg.append("path")
        .datum(data)
        .attr("fill", "url(#area-gradient)")
        .attr("d", area);

      svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "#00d2ff")
        .attr("stroke-width", 2)
        .attr("d", line);

      // Axes
      svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .attr("class", "axis")
        .call(d3.axisBottom(x).ticks(5));

      svg.append("g")
        .attr("class", "axis")
        .call(d3.axisLeft(y).ticks(5));
    }

    // Chart 2: Grouped Bar Chart
    {
      const svg = d3.select("#chart2")
        .append("svg")
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      const groups = ["Q1", "Q2", "Q3", "Q4"];
      const subgroups = ["Product A", "Product B", "Product C"];

      const data = groups.map(g => ({
        group: g,
        "Product A": Math.floor(Math.random() * 50) + 20,
        "Product B": Math.floor(Math.random() * 50) + 30,
        "Product C": Math.floor(Math.random() * 50) + 40
      }));

      const x0 = d3.scaleBand().domain(groups).range([0, width]).padding(0.2);
      const x1 = d3.scaleBand().domain(subgroups).range([0, x0.bandwidth()]).padding(0.05);
      const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);
      const color = d3.scaleOrdinal().domain(subgroups).range(["#ff00cc", "#333399", "#00d2ff"]);

      svg.append("g")
        .selectAll("g")
        .data(data)
        .join("g")
        .attr("transform", d => `translate(${x0(d.group)},0)`)
        .selectAll("rect")
        .data(d => subgroups.map(key => ({ key, value: d[key] })))
        .join("rect")
        .attr("x", d => x1(d.key))
        .attr("y", d => y(d.value))
        .attr("width", x1.bandwidth())
        .attr("height", d => height - y(d.value))
        .attr("fill", d => color(d.key))
        .attr("rx", 4) // Rounded corners top? No, all for simplicity 4px
        .on("mouseover", function (event, d) {
          d3.select(this).attr("opacity", 0.8);
          tooltip.style("opacity", 1)
            .html(`${d.key}: ${d.value}`)
            .style("left", (event.pageX + 10) + "px")
            .style("top", (event.pageY - 28) + "px");
        })
        .on("mouseout", function () {
          d3.select(this).attr("opacity", 1);
          tooltip.style("opacity", 0);
        });

      svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .attr("class", "axis")
        .call(d3.axisBottom(x0));

      svg.append("g")
        .attr("class", "axis")
        .call(d3.axisLeft(y));

      // Legend logic skipped for brevity, colors are self-explanatory usually
    }

    // Chart 3: Animated Donut Chart
    {
      const donutWidth = width + margin.left + margin.right;
      const donutHeight = height + margin.top + margin.bottom;
      const radius = Math.min(donutWidth, donutHeight) / 2 - 20;

      const svg = d3.select("#chart3")
        .append("svg")
        .attr("viewBox", `0 0 ${donutWidth} ${donutHeight}`)
        .append("g")
        .attr("transform", `translate(${donutWidth / 2},${donutHeight / 2})`);

      const data = { a: 9, b: 20, c: 30, d: 8, e: 12, f: 3, g: 7, h: 14 };
      const color = d3.scaleOrdinal()
        .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00", "#ff00cc"]);

      const pie = d3.pie().value(d => d[1]).sort(null);
      const data_ready = pie(Object.entries(data));

      const arc = d3.arc().innerRadius(radius * 0.5).outerRadius(radius * 0.8);
      const outerArc = d3.arc().innerRadius(radius * 0.9).outerRadius(radius * 0.9);

      svg.selectAll('allSlices')
        .data(data_ready)
        .join('path')
        .attr('d', arc)
        .attr('fill', d => color(d.data[0]))
        .attr("stroke", "#121212")
        .style("stroke-width", "2px")
        .style("opacity", 0.7)
        .on("mouseover", function (event, d) {
          d3.select(this).style("opacity", 1).attr("transform", "scale(1.1)");
        })
        .on("mouseout", function () {
          d3.select(this).style("opacity", 0.7).attr("transform", "scale(1)");
        })
        .transition()
        .duration(1000)
        .attrTween('d', function (d) {
          var i = d3.interpolate(d.startAngle + 0.1, d.endAngle);
          return function (t) {
            d.endAngle = i(t);
            return arc(d);
          }
        });

      // Add text in center
      svg.append("text")
        .attr("text-anchor", "middle")
        .attr("dy", "0.3em")
        .text("Total")
        .style("fill", "#fff")
        .style("font-size", "24px");
    }

    // Chart 4: Bubble Scatter Plot
    {
      const svg = d3.select("#chart4")
        .append("svg")
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      const data = Array.from({ length: 40 }, () => ({
        x: Math.random() * 100,
        y: Math.random() * 100,
        z: Math.random() * 30 + 5,
        cat: Math.floor(Math.random() * 3)
      }));

      const x = d3.scaleLinear().domain([0, 100]).range([0, width]);
      const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);
      const z = d3.scaleLinear().domain([0, 40]).range([2, 20]);
      const color = d3.scaleOrdinal().domain([0, 1, 2]).range(["#ff00cc", "#00d2ff", "#ffeb3b"]);

      svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .attr("class", "axis")
        .call(d3.axisBottom(x));

      svg.append("g")
        .attr("class", "axis")
        .call(d3.axisLeft(y));

      svg.selectAll("circle")
        .data(data)
        .join("circle")
        .attr("cx", d => x(d.x))
        .attr("cy", d => y(d.y))
        .attr("r", 0) // Start at 0 for animation
        .style("fill", d => color(d.cat))
        .style("opacity", 0.7)
        .attr("stroke", "white")
        .style("stroke-width", "1px")
        .transition()
        .duration(1000)
        .delay((d, i) => i * 20)
        .attr("r", d => z(d.z));
    }

    // Chart 5: Stacked Bar Chart
    {
      const svg = d3.select("#chart5")
        .append("svg")
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      const data = [
        { group: "A", v1: 10, v2: 20, v3: 15 },
        { group: "B", v1: 5, v2: 35, v3: 10 },
        { group: "C", v1: 20, v2: 10, v3: 25 },
        { group: "D", v1: 15, v2: 25, v3: 20 },
        { group: "E", v1: 30, v2: 5, v3: 15 },
      ];
      const subgroups = ["v1", "v2", "v3"];
      const groups = data.map(d => d.group);

      const x = d3.scaleBand().domain(groups).range([0, width]).padding(0.2);
      const y = d3.scaleLinear().domain([0, 60]).range([height, 0]);
      const color = d3.scaleOrdinal().domain(subgroups).range(['#e41a1c', '#377eb8', '#4daf4a']);

      const stackedData = d3.stack().keys(subgroups)(data);

      svg.append("g")
        .selectAll("g")
        .data(stackedData)
        .join("g")
        .attr("fill", d => color(d.key))
        .selectAll("rect")
        .data(d => d)
        .join("rect")
        .attr("x", d => x(d.data.group))
        .attr("y", d => y(d[1])) // End pos
        .attr("height", d => y(d[0]) - y(d[1]))
        .attr("width", x.bandwidth())
        .attr("opacity", 0.8)
        .on("mouseover", function () { d3.select(this).attr("opacity", 1); })
        .on("mouseout", function () { d3.select(this).attr("opacity", 0.8); });

      svg.append("g").attr("transform", `translate(0,${height})`).attr("class", "axis").call(d3.axisBottom(x));
      svg.append("g").attr("class", "axis").call(d3.axisLeft(y));
    }

    // Chart 6: Radial Bar Chart
    {
      const rWidth = width + margin.left + margin.right;
      const rHeight = height + margin.top + margin.bottom;
      const innerRadius = 80;
      const outerRadius = Math.min(rWidth, rHeight) / 2 - 20;

      const svg = d3.select("#chart6")
        .append("svg")
        .attr("viewBox", `0 0 ${rWidth} ${rHeight}`)
        .append("g")
        .attr("transform", `translate(${rWidth / 2},${rHeight / 2})`);

      const data = [
        { Country: "USA", Value: 90 },
        { Country: "China", Value: 70 },
        { Country: "India", Value: 60 },
        { Country: "Russia", Value: 50 },
        { Country: "Germany", Value: 40 },
        { Country: "Japan", Value: 30 },
        { Country: "UK", Value: 20 }
      ];

      const x = d3.scaleBand()
        .range([0, 2 * Math.PI])
        .domain(data.map(d => d.Country)); // The countries

      const y = d3.scaleRadial()
        .range([innerRadius, outerRadius])
        .domain([0, 100]); // Values 0 to 100

      // Bars
      svg.append("g")
        .selectAll("path")
        .data(data)
        .join("path")
        .attr("fill", "#69b3a2")
        .attr("d", d3.arc()
          .innerRadius(innerRadius)
          .outerRadius(d => y(d.Value))
          .startAngle(d => x(d.Country))
          .endAngle(d => x(d.Country) + x.bandwidth())
          .padAngle(0.01)
          .padRadius(innerRadius))
        .attr("stroke", "#121212")
        .attr("stroke-width", "1px");

      // Labels
      svg.append("g")
        .selectAll("g")
        .data(data)
        .join("g")
        .attr("text-anchor", function (d) { return (x(d.Country) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? "end" : "start"; })
        .attr("transform", function (d) {
          return "rotate(" + ((x(d.Country) + x.bandwidth() / 2) * 180 / Math.PI - 90) + ")" + "translate(" + (y(d.Value) + 10) + ",0)";
        })
        .append("text")
        .text(d => d.Country)
        .attr("transform", function (d) { return (x(d.Country) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? "rotate(180)" : "rotate(0)"; })
        .style("font-size", "11px")
        .style("fill", "#ccc")
        .attr("alignment-baseline", "middle");
    }

  </script>
</body>

</html>